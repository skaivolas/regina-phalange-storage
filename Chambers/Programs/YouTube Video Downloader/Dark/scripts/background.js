function install_notice(){chrome.storage.sync.get({installed_yet:!1,last_version:0,firstLoad:!1},function(e){return e.last_version<chrome.manifest.version&&chrome.storage.sync.set({last_version:chrome.manifest.version}),0==e.installed_yet?void chrome.storage.sync.set({installed_yet:!0,last_version:chrome.manifest.version,firstLoad:!0}):void 0})}chrome.runtime.onMessage.addListener(function(e,t,o){"openPopUp"==e.action&&chrome.windows.create({url:e.url,width:640,height:370,top:500,left:500,type:"popup",focused:!0,state:"docked"},function(t){setTimeout(function(){chrome.tabs.executeScript(t.tabs[0].id,{code:'YouTubeToPopUp_pp_click.setVideoWatcher("'+e.videoId+'")',runAt:"document_end"},function(e){})},1e3)})}),chrome.manifest=function(){var e=!1,t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&(e=JSON.parse(t.responseText))},t.open("GET",chrome.extension.getURL("manifest.json"),!1);try{t.send()}catch(o){console.log("Couldn't load manifest.json")}return e}(),chrome.webRequest.onBeforeSendHeaders.addListener(function(e){var t=e.requestHeaders,o={};return e.url.indexOf("youtube.com/embed/")>-1&&t.push({name:"Referer",value:"https://www.youtube.com/watch?v="}),o.requestHeaders=t,o},{urls:["<all_urls>"]},["requestHeaders","blocking"]),install_notice();