function updateIcon(){var e="images/icon128.png";miniYouTubeActivated||(e="images/icon128_grey.png"),browser.browserAction.setIcon({path:{19:e,38:e}})}function getActivationStatus(){return miniYouTubeActivated}function setActivationStatus(e){miniYouTubeActivated=e,storage.set({miniYouTubeActivated:miniYouTubeActivated}),browser.tabs.query({url:"https://www.youtube.com/*"},function(e){e.forEach(function(e){browser.tabs.sendMessage(e.id,{update_activation_status:miniYouTubeActivated})})})}function getMiniScreenPositions(e){storage.get([MINI_SCREEN_LAST_TOP,MINI_SCREEN_LAST_LEFT,MINI_SCREEN_LAST_HEIGHT,MINI_SCREEN_LAST_WIDTH],function(t){e({positions:t})})}function updateMiniScreenPositions(e){storage.set(e)}var MINI_YOUTUBE_ACTIVATED="miniYouTubeActivated",MINI_SCREEN_LAST_TOP="miniScreenLastTop",MINI_SCREEN_LAST_LEFT="miniScreenLastLeft",MINI_SCREEN_LAST_HEIGHT="miniScreenLastHeight",MINI_SCREEN_LAST_WIDTH="miniScreenLastWidth",miniYouTubeActivated=!0,browser=self.browser;"undefined"==typeof browser&&(browser=self.chrome);var storage=browser.storage.sync;"undefined"==typeof storage&&(storage=browser.storage.local),storage.get([MINI_YOUTUBE_ACTIVATED],function(e){e[MINI_YOUTUBE_ACTIVATED]&&(miniYouTubeActivated=e[MINI_YOUTUBE_ACTIVATED])}),updateIcon(),browser.runtime.onMessage.addListener(function(e,t,i){for(var n in e)switch(n){case"update_icon":setActivationStatus(e[n]),updateIcon();break;case"get_activation_status":i({is_active:getActivationStatus()});break;case"get_miniscreen_positions":return getMiniScreenPositions(i),!0;case"update_miniscreen_positions":updateMiniScreenPositions(e[n])}});