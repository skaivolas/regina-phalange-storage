var config={},_cache={};config.storage={url:"",code:""},config.welcome={timeout:3e3,set open(e){app.storage.write("support",e)},get version(){return app.storage.read("version")},set version(e){app.storage.write("version",e)},get open(){return void 0!==app.storage.read("support")?app.storage.read("support"):!0}},config.show={set"v"(e){app.storage.write("video-only",e)},set"a"(e){app.storage.write("audio-only",e)},get"v"(){return app.storage.read("video-only")+""=="true"},get"a"(){return app.storage.read("audio-only")+""=="true"}},config.download={set"saveAs"(e){app.storage.write("save-as",e)},get"saveAs"(){return void 0!==app.storage.read("save-as")?app.storage.read("save-as"):!1},start:function(e){var t=-1===navigator.userAgent.indexOf("Firefox")?{url:e.url,filename:e.filename,saveAs:config.download.saveAs}:{url:e.url,filename:e.filename};chrome.downloads.download(t,function(){})}},config.format={set"flv"(e){app.storage.write("flv",e)},set"mp4"(e){app.storage.write("mp4",e)},set"3gp"(e){app.storage.write("3gp",e)},set"m4a"(e){app.storage.write("m4a",e)},set"webm"(e){app.storage.write("webm",e)},get"flv"(){return void 0!==app.storage.read("flv")?app.storage.read("flv"):!0},get"mp4"(){return void 0!==app.storage.read("mp4")?app.storage.read("mp4"):!0},get"3gp"(){return void 0!==app.storage.read("3gp")?app.storage.read("3gp"):!0},get"m4a"(){return void 0!==app.storage.read("m4a")?app.storage.read("m4a"):!0},get"webm"(){return void 0!==app.storage.read("webm")?app.storage.read("webm"):!0}},config.size=function(e,t){if(_cache[e])t([e,_cache[e]]);else{var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){var a=null;try{a=o.getResponseHeader("Content-Length")}catch(n){}a?(_cache[e]=a,t([e,a])):t([e,0])}},o.open("HEAD",e,!0),o.setRequestHeader("Cache-Control","no-cache"),o.send(null)}},config.get=function(e){return e.split(".").reduce(function(e,t){return e[t]},config)},config.set=function(e,t){function o(e,t,a){e=e.split("."),e.length>1?o.call((a||this)[e.shift()],e.join("."),t):this[e[0]]=t}o(e,t,config)};